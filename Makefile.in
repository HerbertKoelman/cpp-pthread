# Top makefile to build  @PACKAGE_STRING@
#
# @configure_input@
#

prefix=@prefix@

INSTALL=@INSTALL@ 
LOCALEDIR=@localedir@
RM=@RM@
MKDIR=@MKDIR_P@
PACKAGE=@PACKAGE_NAME@-@PACKAGE_VERSION@-@build_os@.tar.gz
HEADERS=@HEADERS@
PTHREADLIB=libcpp-pthread.a

all: 
	cd src && $(MAKE) clean all

# target used to deplay Tuxedo servers. Not used here.
#deploy:
#	cd src/utl ; $(MAKE) all deploy
#	cd src/monitoring ; $(MAKE) all deploy
#	cd src/security ; $(MAKE) all deploy
#	cd src/tools ; $(MAKE) all deploy
#	cd src/authorize ; $(MAKE) all deploy
#	cd src/interbank ; $(MAKE) all deploy

dist: 
	cd src && $(MAKE) dist
	tar cf - bin udataobj locale doc | gzip -c > distrib/$(PACKAGE)

globber:clean
	${RM} -R html man autom4te.cache config.status config.log

clean:
	${RM} distrib/$(PACKAGE) include/substation.flds.h 
	cd src && $(MAKE) clean

doxygen:
	${DOXYGEN} doxyconf

install:
	$(MKDIR) ${prefix}/include/pthread
	$(MKDIR) ${prefix}/lib/pthread
	$(INSTALL) ${HEADERS} ${prefix}/include/pthread
	$(INSTALL) lib/libcpp-pthread.a ${prefix}/lib/

uninstall:
