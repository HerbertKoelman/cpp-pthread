# Top makefile to build  @PACKAGE_STRING@
#
# @configure_input@
#

prefix=@prefix@

INSTALL=@INSTALL@ 
LOCALEDIR=@localedir@
RM=@RM@
MKDIR=@MKDIR_P@
PACKAGE=@PACKAGE_NAME@-@PACKAGE_VERSION@-@build_os@.tar.gz
HEADERS=@HEADERS@
DOXYGEN=@DOXYGEN@
CODECHECK=@CODECHECK@

PTHREADLIB=libcpp-pthread.a

all: 
	cd src && $(MAKE) clean all

pkg: 
	$(MKDIR) distrib
	tar cf - `git ls-files`  | gzip -c > distrib/$(PACKAGE)

globber:clean
	-$(RM) -R Makefile autom4te.cache config.log config.status 

clean:
	-(cd src && $(MAKE) clean)

codecheck: clean all
		$(CODECHECK)

version:
	autoconf && ( cd src && autoconf )
	-echo "don't forget to run configure."

doxygen:
	${DOXYGEN} doxyfile

install:
	$(MKDIR) ${prefix}/include/pthread
	$(MKDIR) ${prefix}/lib/pthread
	$(INSTALL) ${HEADERS} ${prefix}/include/pthread
	$(INSTALL) lib/libcpp-pthread.a ${prefix}/lib/

uninstall:
	$(RM) -R  ${prefix}/include/pthread
	$(RM) ${prefix}/lib/libcpp-pthread.a
