#
# builds substation related programs

# Compile c++ source code
.SUFFIXES:.cpp

BASEDIR=../
XREFDIR=${BASEDIR}/xref/
UDATAOBJ=$(BASEDIR)/udataobj/
BINDIR=$(BASEDIR)/bin/
APPDIR=$(BASEDIR)/app/
INCDIR=$(BASEDIR)/include/
LIBDIR=$(BASEDIR)/lib/
LOCALEDIR=${BASEDIR}/locale

CC=@CC@
CCC=@CXX@
CXX=$CCC
RANLIB=@RANLIB@
RM=rm -f
AR=@AR@
MV=@MV@
BEAUTIFIER=@BEAUTIFIER@

BITS=@BITS@
OBJECT_MODE=$(BITS)
LIBS=@LIBS@

#DEBUG=-g -bnoquiet
#PROFILER=-p

CXXFLAGS=$(OPTIONS) @CXXFLAGS@
CFLAGS=$(OPTIONS) @CFLAGS@
CPPFLAGS=$(OPTIONS) @CPPFLAGS@

LDFLAGS=@LDFLAGS@

OBJECTS=without-cpp11-pthread-tests.o
TARGETS=without-cpp11-pthread-tests 

all:${TARGETS}
    
clean: globber

globber:
	${RM} *.o core *.a *.out
	${RM} ${TARGETS}
	$(RM) *unc-backup*~ *unc-backup*~
	$(RM) ULOG*

cxref:
	cxref *.c -xref -index-all -latex209 -O${XREFDIR} -I${INCDIR} -I${INCTUX}

beautifull:
	${BEAUTIFIER} *.bcl *.bsr

# cpp build rule
.cpp.o:
	$(CCC) $(CPPFLAGS) $(CXXFLAGS) -c $<

.cpp: 
	$(CCC) $(CPPFLAGS) $(CXXFLAGS) $< -o $@ $(LDFLAGS)
